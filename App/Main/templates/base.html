<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>{% block title %}|Epsilearn{% endblock %}</title>
    <link rel="icon" href="/static/image/epsilogo.jpeg" type="image/x-icon">
    <!-- CSS de Bootstrap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link
    rel="stylesheet"
    href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
    integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
    crossorigin="anonymous"
  />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/htmx/1.9.6/htmx.min.js" integrity="sha512-tGWc4YBM6ag1pJndcieiU2r+lJXdzBRk70mHE13JoGeZI/QdWQkQ6q1CL1xYdJtTOfARf5oPcxJCnS6bLaM+KA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Vibur&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Dangrek&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Kanit&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Permanent+Marker&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Indie+Flower&display=swap">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet"
  />
  <script>
    document.addEventListener("DOMContentLoaded", function() {
        const animateElements = document.querySelectorAll(".animate-element");
    
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const animationName = entry.target.getAttribute("data-animation");
                    entry.target.classList.add("animate__animated", `animate__${animationName}`);
                    observer.unobserve(entry.target);
                }
            });
        });
    
        animateElements.forEach(element => {
            observer.observe(element);
        });
    });
  </script>

  <script>
    // Stocker la position de défilement lorsqu'un lien est cliqué
document.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', function(e) {
        sessionStorage.setItem('scrollPosition', window.scrollY);
    });
});

// Restaurer la position de défilement lorsque l'utilisateur revient en arrière
window.addEventListener('popstate', function(e) {
    const scrollPosition = sessionStorage.getItem('scrollPosition');
    if (scrollPosition !== null) {
        window.scrollTo(0, scrollPosition);
        sessionStorage.removeItem('scrollPosition');
    }
});

  </script>
    <!-- CSS personnalisé -->
    <style>
 /* Barre de défilement verticale */
::-webkit-scrollbar {
    width: 10px; /* Largeur de la barre de défilement */
}

::-webkit-scrollbar-track {
    background-color: #f1f1f1; /* Couleur de l'arrière-plan de la piste */
}

::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 255, 0.3); /* Couleur de la poignée de défilement */
    border-radius: 5px; /* Coins arrondis de la poignée */
}

/* Barre de défilement horizontale */
::-webkit-scrollbar-horizontal {
    height: 10px; /* Hauteur de la barre de défilement horizontale */
}

::-webkit-scrollbar-track-horizontal {
    background-color: transparent; /* Couleur de l'arrière-plan de la piste horizontale */
}

::-webkit-scrollbar-thumb-horizontal {
    background-color: #1461d3; /* Couleur de la poignée de défilement horizontale */
    border-radius: 5px; /* Coins arrondis de la poignée horizontale */
}

        
#loader-wrapper {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    transition: opacity 2s ease-in-out;
    opacity: 1;
}

#loader {
  border: 8px solid #f3f3f3; /* Augmentez la valeur */
    border-top: 8px solid #3498db; /* Augmentez la valeur */
    border-radius: 50%;
    width: 100px; /* Augmentez la valeur */
    height: 100px; /* Augmentez la valeur */
    animation: spin 2s linear infinite;

}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Hide loader when content is loaded */
.loaded #loader-wrapper {
    opacity: 0;
    pointer-events: none;
}

.loaded #loader-wrapper,
.loaded #loader {
    transition: opacity 0.5s ease-in-out;
}

.loaded .page-content {
    display: block;
}


    </style>
    {% block style %}{% endblock %}
    
    <style>
        /* Styles personnalisés pour le menu déroulant */
        .dropdown-menu {
            background-color: #f8f9fa;
            border: none;
            box-shadow: none;
            padding: 0;
        }
        .dropdown-menu a {
            color: #242729;
            padding: 10px 20px;
            text-decoration: none;
            display: block;
        }
        .dropdown-menu a:hover {
            background-color: #e9ecef;
        }
        .navbar-brand {
            font-weight: bold;
        }
        .user-initials {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: blue;
            color: #ffffff;
            font-size: 18px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 5px;
            text-transform: uppercase;
        }
        .nav-link:hover{
            color: blue;
        }
        
      



    </style>

</head>

<body style="font-family: 'Kanit';">
 <div class="page-content hidden">
    <div id="loader-wrapper">
        <div id="loader"></div>
    </div>
    {% block nav %}
    <!-- Barre de navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-transparent " style="display: flex;justify-content: center; height: 40px;scale: 0.9;z-index: 9999999999999999999999;" >
        <div class="container-fluid text-center" style="background-color: rgb(255, 255, 255);border-radius: 20px;z-index: 9;opacity: 1;margin-top: 20px;padding: 0 12px;">
            <a class="navbar-brand" href="/accueil" style="color: blue;">Epsilearn</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" style="border: none; background-color: none; color: #FFFFFF; font-size: 14px;">
                <span class="navbar-toggler-icon" style="transform: scale(1.5);"></span>
            </button>          
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav" style="z-index: 99999999999999999;">
                    {% if user_type == 'professeur' %}
                    {% if np.us>0 %}
                    <style>
                        #prg{
                            color: brown;
                            font-weight: bold;
                        }

                    </style>
                    {% endif %}
                    {% if nd.us > 0 %}
                    <style>
                        #dmd{
                            color: brown;
                            font-weight: bold;
                        }

                    </style>
                    {% endif %}
                    <li class="nav-item dropdown" >
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Cours
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <li><a id="prg" class="dropdown-item" href="/programme">Programmes{% if np.us > 0 %}({{np.us}}){% endif %}</a></li>
                            <li><a id="dmd" class="dropdown-item" href="/demande">Demandes{% if nd.us > 0 %}({{nd.us}}){% endif %}</a></li>
                            <li><a class="dropdown-item" href="/offre">Offres</a></li>
                            <li><a class="dropdown-item" href="/cours-crees">Mes services</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="evenement" href="/evenement">Evenements</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link"  id="workroom" href="/chambrepomodoro">Work Room</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="about"  href="/about">À Propos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="faq"  href="/faq">FAQ</a>
                    </li>
                      
                    
    
                    {% elif user_type == 'etudiant' %}
                    {% if np.us > 0 %}
                    <style>
                        #prg{
                            color: brown;
                            font-weight: bold;
                        }

                    </style>
                    {% endif %}
                    {% if nd.us > 0 %}
                    <style>
                        #dmd{
                            color: brown;
                            font-weight: bold;
                        }

                    </style>
                    {% endif %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle"  href="#" id="navbarDropdownMenuLink"  role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Cours
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <li><a id="prg" class="dropdown-item" href="/programme">Programmes{% if np.us > 0 %}({{np.us}}){% endif %}</a></li>
                            <li><a id="dmd" class="dropdown-item" href="/demande">Demandes{% if nd.us > 0 %}({{nd.us}}){% endif %}</a></li>
                            <li><a class="dropdown-item" href="/abonner">Abonnements</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="evenement" href="/evenement">Evenements</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="listeprof" href="/listeprof">Nos professeurs</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link"  id="workroom" href="/chambrepomodoro">Work Room</a>
                  </li>
                <li class="nav-item">
                    <a class="nav-link" id="about" href="/about">À Propos</a>
                </li>
                  <li class="nav-item">
                    <a class="nav-link" id="faq"  href="/faq">FAQ</a>
                </li>
                    {% elif user_type == 'autre' %}
                    <li class="nav-item">
                        <a class="nav-link" id="evenement"  href="/evenement">Événements</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link"  id="workroom" href="/chambrepomodoro">Work Room</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="about" href="/about">À Propos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="faq"  href="/faq">FAQ</a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" id="evenement"  href="/evenement">Événements</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link"  id="workroom" href="/chambrepomodoro">Work Room</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="about" href="/about">À Propos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="faq"  href="/faq">FAQ</a>
                    </li>
                    {% endif %}
                </ul>
                <ul class="navbar-nav ms-auto">
                    {% if current_user %}
                    <!-- Afficher le nom de l'utilisateur connecté et le menu déroulant -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink2" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <span class="user-initials">{{ current_user.nom|first }}</span>{{ current_user.nom }} {{ current_user.prenom }}
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="/profil"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="6" r="4" fill="#1C274C"/>
                                <path opacity="0.5" d="M20 17.5C20 19.9853 20 22 12 22C4 22 4 19.9853 4 17.5C4 15.0147 7.58172 13 12 13C16.4183 13 20 15.0147 20 17.5Z" fill="#1C274C"/>
                                </svg> Mon profil</a></li>
                        
                            {% if user_type=="professeur" %}
                            <li><a class="dropdown-item" href="/solde"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="20px" width="20px" version="1.1" id="Icons" viewBox="0 0 32 32" xml:space="preserve">
                                <path d="M15,2H5C3.3,2,2,3.3,2,5v20c0,1.7,1.3,3,3,3h2c0.6,0,1-0.4,1-1s-0.4-1-1-1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h1v0.3  C6,5.8,7.2,7,8.7,7h2.6C12.8,7,14,5.8,14,4.3V4h1c0.6,0,1,0.4,1,1v9c0,0.6,0.4,1,1,1s1-0.4,1-1V5C18,3.3,16.7,2,15,2z"/>
                                <g>
                                    <path d="M31,17v-1c0-1.7-1.3-3-3-3H9c-1.7,0-3,1.3-3,3v1H31z"/>
                                    <path d="M6,19v8c0,1.7,1.3,3,3,3h19c1.7,0,3-1.3,3-3v-8H6z M24.8,26c-0.5,0-1-0.2-1.4-0.6C23,25.8,22.5,26,22,26c-1.1,0-2-0.9-2-2   s0.9-2,2-2c0.5,0,1,0.2,1.4,0.6c0.4-0.4,0.9-0.6,1.4-0.6c1.1,0,2,0.9,2,2S25.9,26,24.8,26z"/>
                                </g>
                                </svg> Solde</a></li>
                            {% endif %}
                            <li><a class="dropdown-item" href="/users"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" fill="none">
                                <path d="M8 10H16M8 14H16M21.0039 12C21.0039 16.9706 16.9745 21 12.0039 21C9.9675 21 3.00463 21 3.00463 21C3.00463 21 4.56382 17.2561 3.93982 16.0008C3.34076 14.7956 3.00391 13.4372 3.00391 12C3.00391 7.02944 7.03334 3 12.0039 3C16.9745 3 21.0039 7.02944 21.0039 12Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg> Messagerie</a></li>
                            <li><a class="dropdown-item" href="/reclamation"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" width="20px" height="20px" viewBox="0 0 64 64" version="1.1" xml:space="preserve">
                                <g id="_x32_5_attachment"/>
                                <g id="_x32_4_office"/>
                                <g id="_x32_3_pin"/> 
                                <g id="_x32_2_business_card"/>
                                <g id="_x32_1_form"/>
                                <g id="_x32_0_headset">
                                <g>
                                <path d="M63,40.2202c0-5.9472-3.9073-10.9949-9.2881-12.7225v-6.0148c0-10.5703-10.1641-19.8423-21.752-19.8423    s-21.752,9.272-21.752,19.8423v6.0442C4.8693,29.2792,1,34.303,1,40.2202C1,47.5884,6.9941,53.583,14.3623,53.583h3.6738    c1.9336,0,3.5059-1.5728,3.5059-3.5059v-19.71c0-1.8768-1.4827-3.4017-3.3359-3.4926v-5.1373    c0-6.0151,5.8818-12.7432,13.7539-12.7432c7.8701,0,13.75,6.728,13.75,12.7432v5.1458c-1.8132,0.1329-3.252,1.636-3.252,3.4841    v19.71c0,1.9331,1.5723,3.5059,3.5059,3.5059h2.6728l-0.0048,4.5596h-5.6547c-0.3737-1.429-1.6642-2.4917-3.2086-2.4917h-2.0977    c-1.835,0-3.3281,1.4932-3.3281,3.3281s1.4932,3.3281,3.3281,3.3281h2.0977c1.4242,0,2.6327-0.9039,3.1068-2.1646h6.7556    c0.5518,0,0.999-0.4473,1-0.999l0.0059-5.6111C57.5385,53.0181,63,47.2512,63,40.2202z M39.7686,60.3071h-2.0977    c-0.7324,0-1.3281-0.5957-1.3281-1.3281s0.5957-1.3281,1.3281-1.3281h2.0977c0.7324,0,1.3281,0.5957,1.3281,1.3281    S40.501,60.3071,39.7686,60.3071z M13.3623,51.5396C7.5635,51.0313,3,46.1489,3,40.2202s4.5635-10.811,10.3623-11.3193V51.5396z     M19.542,30.3672v19.71c0,0.8306-0.6758,1.5059-1.5059,1.5059h-2.6738V28.8574h2.6738    C18.8662,28.8574,19.542,29.5347,19.542,30.3672z M31.96,6.9941c-8.2451,0-15.7539,7.0273-15.7539,14.7432v5.1201h-1.8438    c-0.735,0-1.4512,0.0753-2.1543,0.19v-5.5645c0-9.5049,9.2295-17.8423,19.752-17.8423s19.752,8.3374,19.752,17.8423v5.5522    c-0.6778-0.1064-1.3671-0.1777-2.0742-0.1777H47.71v-5.1201C47.71,14.0215,40.2031,6.9941,31.96,6.9941z M44.458,50.0771v-19.71    c0-0.8325,0.6758-1.5098,1.5059-1.5098h2.6738V51.583h-2.6738C45.1338,51.583,44.458,50.9077,44.458,50.0771z M50.6377,51.5396    V28.9009C56.4365,29.4092,61,34.2915,61,40.2202S56.4365,51.0313,50.6377,51.5396z"/>
                                </g>
                                </g>
                                <g id="_x31_9_video_call"/>
                                <g id="_x31_8_letter_box"/>    
                                <g id="_x31_7_papperplane"/>
                                <g id="_x31_6_laptop"/>          
                                <g id="_x31_5_connection"/>
                                <g id="_x31_4_phonebook"/>
                                <g id="_x31_3_classic_telephone"/>
                                <g id="_x31_2_sending_mail"/>
                                <g id="_x31_1_man_talking"/>
                                <g id="_x31_0_date"/>
                                <g id="_x30_9_review"/>
                                <g id="_x30_8_email"/>
                                <g id="_x30_7_information"/>
                                <g id="_x30_6_phone_talking"/>
                                <g id="_x30_5_women_talking"/>
                                <g id="_x30_4_calling"/> 
                                <g id="_x30_3_women"/> 
                                <g id="_x30_2_writing"/>       
                                <g id="_x30_1_chatting"/>
                                </svg>  Nous Contacter</a></li>
                            <hr>
                            <li><a class="dropdown-item" id="dec" href="{{url_for('Main.deconnexion')}}"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" fill="none">
                                <g clip-path="url(#clip0_429_11067)">
                                <path d="M15 4.00098H5V18.001C5 19.1055 5.89543 20.001 7 20.001H15" stroke="#292929" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M16 15.001L19 12.001M19 12.001L16 9.00098M19 12.001H9" stroke="#292929" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </g>
                                <defs>
                                <clipPath id="clip0_429_11067">
                                <rect width="24" height="24" fill="white" transform="translate(0 0.000976562)"/>
                                </clipPath>
                                </defs>
                                </svg> Se déconnecter</a></li>
                        </ul>
                    </li>
                    <script>
                        document.getElementById('dec').addEventListener('click', function() {
                            // Appeler l'API pour décrémenter le compteur
                            fetch('/decrement', { method: 'POST' })
                                .then(response => response.json())
                                .then(data => console.log(data.message))
                                .catch(error => console.error('Une erreur s\'est produite', error));
                        });
                    </script>
                    {% else %}
                    {% block conecter %} 
                    <!-- Afficher le lien pour se connecter -->
                     <li class="nav-item">
                         <a class="nav-link" href="/connexion"><button style="background-color: blue; color: white; border-radius: 20px; border: none;">Se connecter</button></a>
                    </li>
                    {% endblock %}
                   
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    {% endblock %}
    <!-- Contenu de la page -->
    <div  style="font-family:'Kanit';overflow-x:hidden;overflow-y: hidden;">
        {% block content %}
        {% endblock %}
    </div>
</div>

    <!-- Scripts JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
   
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                document.body.classList.add('loaded');
            }, 500);
        });

        // Sélectionnez l'élément de chargement
const loader = document.getElementById("loader");
// Fonction pour cacher le chargement et afficher le contenu de la page
function hideLoader() {
    loader.style.display = "none";
    document.body.style.overflow = "auto"; // Rétablir le défilement de la page
}

// Attendez que le contenu de la page soit chargé
window.addEventListener("load", () => {
    // Obtenez toutes les images de la page
    const images = document.querySelectorAll("img");
    const totalImages = images.length;
    let imagesLoaded = 0;

    // Fonction pour vérifier si toutes les images sont chargées
    function checkImagesLoaded() {
        imagesLoaded++;
        if (imagesLoaded === totalImages) {
            // Toutes les images sont chargées, cachez le loader
            hideLoader();
        }
    }

    // Attachez un gestionnaire d'événement pour chaque image
    images.forEach((img) => {
        img.addEventListener("load", checkImagesLoaded);
        img.addEventListener("error", checkImagesLoaded); // Gestion des erreurs d'image
    });
});
    </script>
    <script>
         let accordian = document.getElementsByClassName("FAQ__title");

for (let i = 0; i < accordian.length; i++) {
  accordian[i].addEventListener("click", function () {
    if (this.childNodes[1].classList.contains("fa-plus")) {
      this.childNodes[1].classList.remove("fa-plus");
      this.childNodes[1].classList.add("fa-times");
    } else {
      this.childNodes[1].classList.remove("fa-times");
      this.childNodes[1].classList.add("fa-plus");
    }

    let content = this.nextElementSibling;
    if (content.style.maxHeight) {
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    }
  });
}


    </script>
    

</body>
</html>
